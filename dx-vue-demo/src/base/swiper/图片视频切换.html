<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>清新农商银行</title>
    <link rel="stylesheet" href="../plugs/common.css">
    <script src="../plugs/jquery-1.11.2.min.js"></script>
    <script src="../plugs/jsize-horizontal-1920.js"></script>
    <script src="../plugs/swiper/swiper.min.js"></script>
    <link rel="stylesheet" href="../plugs/swiper/swiper.min.css">
</head>
<body>

<div class="container">

    <div class="hover-div"></div>

    <div class="swiper-container">
        <div class="swiper-wrapper">
<!--            &lt;!&ndash;图片start&ndash;&gt;-->
<!--            <div class='swiper-slide'>-->
<!--                <img src="../../assets/image/com01.jpg" class="slide-img"/>-->
<!--            </div>-->
<!--            &lt;!&ndash;图片end&ndash;&gt;-->

            <div class='swiper-slide'>
                <video class='slider-video' muted object-fit="fill" onended='playEnd()'>
                    <source src="../../assets/video/demo01.mp4" type="video/mp4">
                </video>
            </div>
            <div class='swiper-slide'>
                <video class='slider-video' muted object-fit="fill" onended='playEnd()'>
                    <source src="../../assets/video/demo02.mp4" type="video/mp4">
                </video>
            </div>
            <div class='swiper-slide'>
                <video class='slider-video' muted object-fit="fill" onended='playEnd()'>
                    <source src="../../assets/video/demo01.mp4" type="video/mp4">
                </video>
            </div>
            <div class='swiper-slide'>
                <video class='slider-video' muted object-fit="fill" onended='playEnd()'>
                    <source src="../../assets/video/demo02.mp4" type="video/mp4">
                </video>
            </div>

        </div>
    </div>

</div>

<script>
    window.onload = function () {
        //TODO 图片停留的时间(单位毫秒)
        var delay = 2000
        //TODO 切换的速度（单位毫秒）
        var speed = 300

        var inFistFlag = true
        var mySwiper
        mySwiper = new Swiper('.swiper-container', {
            loop: true,
            speed: speed,
            autoplay: {
                delay: delay
            },
            on: {
                transitionEnd: function () {
                    console.log("transitionStart---->")
                    //先启动轮播
                    if (inFistFlag){
                        console.log("只在开始执行一次！！！！！")
                        if ( $(".swiper-slide-active").children("video").length >0) {
                            $(".swiper-slide-active").children("video").get(0).play();
                            setTimeout(function (){
                                mySwiper.autoplay.stop();
                            },1000)
                        }
                        inFistFlag = false
                    }else {
                        console.log("111111111")
                        if ( $(".swiper-slide-active").children("video").length >0) {
                            mySwiper.autoplay.stop();
                            $(".swiper-slide").children("video").trigger('pause');
                            $(".swiper-slide-active").children("video").trigger('play');
                        }else {
                            mySwiper.autoplay.start()
                        }
                    }
                },
            }
        })

        //视频播放完毕监听事件
        playEnd = function () {
            console.log("playEnd.....")
            mySwiper.slideNext()
            console.log("000000000")
        }
    }
</script>

<style>
    body {
        width: 100vw;
        height: 100vh;
        overflow: hidden;
    }
    .container {
        width: 100%;
        height: 100%;
        position: relative;
    }

    .swiper-container {
        width: 100%;
        height: 100%;
    }

    .swiper-slide {
        width: 100%;
        height: 100%;
        background-color: black;
    }

    .slide-img {
        width: 100%;
        height: 100%;
    }

    .slider-video {
        width: 100%;
        height: 100%;
    }

    .hover-div{
        position: absolute;
        width: 100%;
        height: 100%;
        z-index: 999;
    }

</style>
</body>
</html>
