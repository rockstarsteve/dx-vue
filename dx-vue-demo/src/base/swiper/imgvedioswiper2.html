<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <link rel="stylesheet" href="css/swiper.min.css">
  <script src="js/jquery-1.11.2.min.js"></script>
  <script src="js/swiper.min.js"></script>
  <style>
    .swiper-container-imgvideo{
      width: 500px;
      height: 500px;
    }

    .swiper-container-imgvideo .swiper-slide .slider-video{
      width: 100%;
      height: 100%;
    }

    .swiper-container-imgvideo .swiper-slide .slider-img{
      width: 100%;
      height: 100%;
    }
  </style>

</head>
<body>

<div class='swiper-container swiper-container-imgvideo'>
  <div class='swiper-wrapper'>
    <!--第一屏为图片-->
    <div class='swiper-slide swiper-no-swiping'>
      <div class='banner-video'>
        <video src="video/mov_bbb.mp4" class='slider-video' object-fit="fill" poster='' muted='' onended='playEnd()' onplay='startPlay()' autoplay='true'>
          <source src="video/mov_bbb.mp4" type="video/mp4">
        </video>
      </div>
    </div>
    <!--第二屏为图片-->
    <div class='swiper-slide swiper-no-swiping'>
      <a href="#"><img src='images/1.png' class="slider-img"/></a>
    </div>

    <!--第一屏为图片-->
    <div class='swiper-slide swiper-no-swiping'>
      <div class='banner-video'>
        <video src="video/summer20190515.mp4" class='slider-video' object-fit="fill" poster='' muted='' onended='playEnd()' onplay='startPlay()' autoplay='true'>
          <source src="video/summer20190515.mp4" type="video/mp4">
        </video>
      </div>
    </div>

    <!--第二屏为图片-->
    <div class='swiper-slide swiper-no-swiping'>
      <a href="#"><img src='images/3.png' class="slider-img"/></a>
    </div>
  </div>
</div>


<script>

  //初始化Swiper
  var mySwiper = new Swiper('.swiper-container-imgvideo', {
    pagination: {
      el: '.swiper-container-imgvideo .swiper-pagination', //分页器
      clickable: false,
    },
    autoplay: {
      delay: 3000,
      stopOnLastSlide: false, //播放到最后一张是否停止
      disableOnInteraction: false, //手动滑动是否停止自动播放
    },
    observer: true,
    observeParents: true,
    fadeEffect: {
      crossFade: true,
    },
    effect: 'fade',//添加切换淡出效果
    on: {
      transitionEnd: function () { //切换下一屏时，运行的代码
        //判断当前轮播屏是否为视频
        if ($(".swiper-slide-active .banner-video").hasClass('banner-video')) {
          //自动播放当前页面的视频
          $('.swiper-slide-active video')[0].play();
          mySwiper.autoplay.stop(); //停止轮播图轮播
        }
      },
    }

  });

  //视频播放完毕监听事件
  window.playEnd = function () {
    mySwiper.autoplay.start(); //轮播图开始自动播放
    mySwiper.slideNext(); //播放完视频，立即切换下一个
    mySwiper.autoplay.delay = 3000; //轮播图自动播放时秒数为5秒
    $('.swiper-slide video')[0].pause(); //所有背景视频停止播放
  }
  //视频开始播放监听事件
  window.startPlay = function () {
    //判断当前轮播屏是否为视频
    if ($(".swiper-container-imgvideo .swiper-slide-active .banner-video").hasClass('banner-video')) {
      mySwiper.autoplay.stop(); //停止轮播图轮播
    }
  };

</script>

</body>
</html>
